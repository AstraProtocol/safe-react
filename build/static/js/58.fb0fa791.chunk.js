(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[58],{2154:function(e,t,n){"use strict";n.d(t,"a",(function(){return I})),n.d(t,"b",(function(){return L}));var r=n(2),c=n.n(r),a=n(3),s=n(8),u=n(455),i=n(344),o=n(730),b=n(69),l=n(515),f=n(199),j=n(48),O=n(509),d=n(12),p=n(17),h=n(27),x=n(41),v=n(508),T=n(20),A=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(h.getCollectibles)(Object(T.b)(),Object(b.a)(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=n(26),m=function(){function e(){var t=this;Object(d.a)(this,e),this._getAssetsFromTokens=function(e){return e.map((function(e){return{address:e.address,decimals:void 0,logoUri:e.logoUri,name:e.tokenName,symbol:e.tokenSymbol,type:h.TokenType.ERC721}}))},this._fetch=function(){var e=Object(s.a)(c.a.mark((function e(n){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={erc721Assets:[],erc721Tokens:[]},e.prev=1,e.next=4,A(n);case 4:a=e.sent,r.erc721Assets=t._getAssetsFromTokens(a),r.erc721Tokens=a||[],e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),Object(S.c)(S.b._604,e.t0.message);case 12:return e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()}return Object(p.a)(e,[{key:"fetchCollectibles",value:function(){var t=Object(s.a)(c.a.mark((function t(n){var r,a,s,u,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._fetch(n);case 2:return r=t.sent,a=r.erc721Assets,s=r.erc721Tokens,u=e.extractTokens(s),i=e.extractAssets(a,u),t.abrupt("return",{nftTokens:u,nftAssets:i});case 8:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}],[{key:"extractAssets",value:function(t,n){var r={};return t.forEach((function(t){var c=t.address;void 0===r[c]&&(r[c]=e.extractNFTAsset(t,n))})),r}},{key:"extractTokens",value:function(e){return e.map((function(e){return{assetAddress:e.address,color:"red",description:e.description||"",image:e.imageUri||v.a,name:e.name||"",tokenId:e.id}}))}}]),e}();m.extractNFTAsset=function(e,t){var n=e.address,r=t.filter((function(e){var t=e.assetAddress;return Object(x.f)(t,n)})).length;return{address:n,description:e.name,image:e.logoUri||v.a,name:e.name,numberOfTokens:r,slug:"".concat(n,"_").concat(e.name),symbol:e.symbol}};var k=m,_=n(30),E={gnosis:new k},g=n(512),y=function(e){return function(){var t=Object(s.a)(c.a.mark((function t(n){var r,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Object(g.f)(!1)),t.prev=1,r=E[_.d.toLowerCase()],t.next=5,r.fetchCollectibles(e);case 5:a=t.sent,n(Object(g.d)(a.nftAssets)),n(Object(g.e)(a.nftTokens)),n(Object(g.f)(!0)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(1),n(Object(g.f)(!1)),console.log("Error fetching collectibles:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},C=n(70),w=n(767),N=function(e){return function(t){t(Object(w.b)(e))}},B=n(2171),I=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,r,s,u,f,j,O;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(b.a)(t),r={address:n,loadedViaUrl:!1},s=Object(i.b)(t),e.next=5,Object(o.a)(t).catch((function(e){return e.log(),null}));case 5:if(!(u=e.sent)){e.next=12;break}return e.next=9,Object(l.c)(u);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0={};case 13:return f=e.t0,j=s||{},O=Object(l.a)(null===u||void 0===u?void 0:u.owners,j.owners),e.abrupt("return",Object(a.a)(Object(a.a)(Object(a.a)(Object(a.a)({},j),r),f),{},{owners:O}));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var n=Object(s.a)(c.a.mark((function n(r){var s,i,d,p,h,x,v,T,A,S,m,k,_,E,g;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i=[],d=Object(b.a)(e),p={},h=null,n.prev=4,n.next=7,Object(o.a)(d);case 7:h=n.sent,n.next=13;break;case 10:n.prev=10,n.t0=n.catch(4),n.t0.log();case 13:if(x=f.a.getState(),v=Object(C.a)(x),!h){n.next=29;break}if(h.chainId===v){n.next=18;break}return n.abrupt("return");case 18:return n.next=20,Object(l.c)(h);case 20:p=n.sent,T=Object(j.i)(x),A=T.collectiblesTag,S=T.txQueuedTag,m=T.txHistoryTag,k=A!==p.collectiblesTag,_=m!==p.txHistoryTag,E=S!==p.txQueuedTag,i.push(r(Object(B.a)(d))),(k||t)&&r(y(d)),(_||E||t)&&i.push(r(Object(O.a)(v,d))),t&&i.push(r(N(d)));case 29:return g=Object(l.a)((null===(s=h)||void 0===s?void 0:s.owners)||[]),n.next=32,Promise.all(i);case 32:return n.abrupt("return",r(Object(u.b)(Object(a.a)(Object(a.a)({address:d},p),{},{owners:g,loaded:!0}))));case 33:case"end":return n.stop()}}),n,null,[[4,10]])})));return function(e){return n.apply(this,arguments)}}()}},2171:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r=n(2),c=n.n(r),a=n(8),s=n(3),u=n(108),i=n.n(u),o=n(2172),b=n(768),l=n(734),f=n(455),j=n(173),O=n(48),d=n(738),p=n(41),h=n(26),x=function(e,t){var n=t.balance,r=t.fiatBalance,c=t.tokenInfo,a=c.address,u=c.decimals;return e.balances.push({tokenAddress:a,fiatBalance:r,tokenBalance:Object(j.b)(n,Number(u))}),Object(p.f)(a,p.a)?e.ethBalance=Object(j.b)(n,Number(u)):e.tokens.push(Object(l.a)(Object(s.a)({},c))),e},v=function(e,t){return function(){var n=Object(a.a)(c.a.mark((function n(r,a){var s,u,l,j,p,v,T;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=a(),Object(O.a)(s)){n.next=4;break}return n.abrupt("return");case 4:return u=null!==t&&void 0!==t?t:Object(d.b)(s),n.prev=5,n.next=8,Object(o.a)({safeAddress:e,selectedCurrency:u});case 8:l=n.sent,n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(5),Object(h.c)(h.b._601,n.t0.message),n.abrupt("return");case 15:j=l.items.reduce(x,{balances:[],ethBalance:"0",tokens:[]}),p=j.balances,v=j.ethBalance,T=j.tokens,r(Object(f.b)({address:e,balances:p,ethBalance:v,totalFiatBalance:new i.a(l.fiatTotal).toFixed(2)})),r(Object(b.b)(T));case 18:case"end":return n.stop()}}),n,null,[[5,11]])})));return function(e,t){return n.apply(this,arguments)}}()}},2172:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(2),c=n.n(r),a=n(8),s=n(27),u=n(20),i=n(69),o=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,r,a,o,b,l,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.safeAddress,r=t.selectedCurrency,a=t.excludeSpamTokens,o=void 0===a||a,b=t.trustedTokens,l=void 0!==b&&b,f=Object(i.a)(n),e.abrupt("return",Object(s.getBalances)(Object(u.b)(),f,r,{exclude_spam:o,trusted:l}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},2328:function(e,t,n){"use strict";var r,c,a=n(7),s=n(82),u=n(9),i=n(6),o=n(172),b=n(1),l=Object(i.default)(s.a)(r||(r=Object(a.a)(["\n  text-decoration: none;\n"]))),f=i.default.div(c||(c=Object(a.a)(["\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  // Offset so that it is centered relative to the header\n  margin-top: -30px;\n"])));t.a=function(e){var t=e.text,n=e.buttonText,r=e.redirectRoute,c=e.onClick;return Object(b.jsxs)(f,{children:[Object(b.jsx)("img",{src:"./resources/error.png",alt:"Error"}),Object(b.jsx)(u.Title,{size:"xs",children:t}),Object(b.jsx)(l,{to:r,onClick:c,children:Object(b.jsx)(o.a,{color:"primary",size:"medium",variant:"contained",children:n})})]})}},3093:function(e,t,n){"use strict";n.r(t),n.d(t,"BALANCES_TAB_BTN_TEST_ID",(function(){return w})),n.d(t,"SETTINGS_TAB_BTN_TEST_ID",(function(){return N})),n.d(t,"APPS_TAB_BTN_TEST_ID",(function(){return B})),n.d(t,"TRANSACTIONS_TAB_BTN_TEST_ID",(function(){return I})),n.d(t,"ADDRESS_BOOK_TAB_BTN_TEST_ID",(function(){return L})),n.d(t,"SAFE_VIEW_NAME_HEADING_TEST_ID",(function(){return R})),n.d(t,"TRANSACTIONS_TAB_NEW_BTN_TEST_ID",(function(){return D}));var r=n(3),c=n(15),a=n(9),s=n(0),u=n(16),i=n(59),o=n(48),b=n(263),l=n(459),f=n(25),j=n(27),O=n(30),d=n(972),p=n(2328),h=n(1),x=function(){var e=Object(u.c)(),t=Object(u.d)(o.a).address;return Object(h.jsx)(p.a,{text:"This Safe couldn't be loaded",buttonText:"Back to Main Page",redirectRoute:f.l,onClick:function(){return e(Object(d.b)(t))}})},v=n(2),T=n.n(v),A=n(8),S=n(110),m=n(985),k=function(){return function(){var e=Object(A.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(S.b)();case 2:n=e.sent,t(Object(m.b)(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},_=n(2154),E=n(987),g=n(26),y=n(70),C=n(73),w="balances-tab-btn",N="settings-tab-btn",B="apps-tab-btn",I="transactions-tab-btn",L="address-book-tab-btn",R="safe-name-heading",D="transactions-tab-new-btn",P=Object(s.lazy)((function(){return Promise.all([n.e(8),n.e(35)]).then(n.bind(null,3088))})),F=Object(s.lazy)((function(){return Promise.all([n.e(3),n.e(8),n.e(27),n.e(38)]).then(n.bind(null,3083))})),z=Object(s.lazy)((function(){return n.e(68).then(n.bind(null,3098))})),U=Object(s.lazy)((function(){return n.e(59).then(n.bind(null,3070))})),G=Object(s.lazy)((function(){return n.e(105).then(n.bind(null,3089))})),H=Object(s.lazy)((function(){return Promise.all([n.e(2),n.e(100),n.e(47)]).then(n.bind(null,3087))}));t.default=function(){var e=Object(u.d)(o.e),t=Object(u.d)(o.a).owners,n=Object(C.a)().safeAddress,d=t.length>0,p=Object(s.useState)(!1),v=Object(c.a)(p,2),S=v[0],m=v[1];!function(e){var t=Object(u.c)(),n=Object(u.d)(y.a);Object(s.useEffect)((function(){if(e){var n=function(){var n=Object(A.a)(T.a.mark((function n(){return T.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t(k()),t(Object(_.b)(e,!0)),t(function(){var e=Object(A.a)(T.a.mark((function e(t){var n;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(j.getFiatCurrencies)();case 3:n=e.sent,t(Object(E.b)({availableCurrencies:n})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Object(g.c)(g.b._607,e.t0.message);case 10:return e.abrupt("return",Promise.resolve());case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}}),[t,e,n])}(n),function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Object(u.c)(),r=Object(s.useState)(0),a=Object(c.a)(r,2),i=a[0],o=a[1],b=Object(u.d)(y.a);Object(s.useEffect)((function(){var r=setTimeout((function(){e&&n(Object(_.b)(e,t)),o((function(e){return e+1}))}),O.A);return function(){clearTimeout(r)}}),[n,e,b,i,o,t])}(n,S),Object(s.useEffect)((function(){if(!d){var e=setTimeout((function(){m(!0)}),O.A);return function(){clearTimeout(e)}}m(!1)}),[d]);var w=Object(s.useState)({isOpen:!1,title:null,body:null,footer:null,onClose:function(){}}),N=Object(c.a)(w,2),B=N[0],I=N[1];if(S)return Object(h.jsx)(x,{});if(!d)return Object(h.jsx)(l.a,{children:Object(h.jsx)(a.Loader,{size:"md"})});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)(i.d,{children:[Object(h.jsx)(i.b,{exact:!0,path:f.i.DASHBOARD,render:function(){return Object(b.a)(Object(h.jsx)(P,{}))}}),Object(h.jsx)(i.b,{path:f.i.LEGACY_COLLECTIBLES,exact:!0,render:function(){return Object(h.jsx)(i.a,{to:Object(f.p)(f.i.ASSETS_BALANCES_COLLECTIBLES,Object(f.n)())})}}),Object(h.jsx)(i.b,{exact:!0,path:[f.i.ASSETS_BALANCES,f.i.ASSETS_BALANCES_COLLECTIBLES],render:function(){return Object(b.a)(Object(h.jsx)(U,{}))}}),Object(h.jsx)(i.b,{exact:!0,path:[f.i.TRANSACTIONS,f.i.TRANSACTIONS_HISTORY,f.i.TRANSACTIONS_QUEUE,f.i.TRANSACTIONS_SINGULAR],render:function(){return Object(b.a)(Object(h.jsx)(G,{}))}}),Object(h.jsx)(i.b,{exact:!0,path:f.i.ADDRESS_BOOK,render:function(){return Object(b.a)(Object(h.jsx)(H,{}))}}),Object(h.jsx)(i.b,{exact:!0,path:f.i.APPS,render:function(t){var n=t.history;return e.includes(j.FEATURES.SAFE_APPS)||n.push(Object(f.p)(f.i.ASSETS_BALANCES,Object(f.n)())),Object(b.a)(Object(h.jsx)(F,{}))}}),Object(h.jsx)(i.b,{path:f.i.SETTINGS,render:function(){return Object(b.a)(Object(h.jsx)(z,{}))}}),Object(h.jsx)(i.a,{to:f.i.ASSETS_BALANCES})]}),B.isOpen&&Object(h.jsx)(a.GenericModal,Object(r.a)(Object(r.a)({},B),{},{onClose:function(){var e;B.onClose&&(null===(e=B.onClose)||void 0===e||e.call(B));I({isOpen:!1,title:null,body:null,footer:null,onClose:function(){}})}}))]})}}}]);
//# sourceMappingURL=58.fb0fa791.chunk.js.map