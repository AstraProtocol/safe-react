(this["webpackJsonpsafe-react"]=this["webpackJsonpsafe-react"]||[]).push([[48],{2060:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(31),r=n(253),c={OPEN_APP:{event:a.a.CLICK,action:"Open Safe App"},PIN:{event:a.a.CLICK,action:"Pin Safe App"},UNPIN:{event:a.a.CLICK,action:"Unpin Safe App"},SEARCH:{event:a.a.META,action:"Search for Safe App"},ADD_CUSTOM_APP:{event:a.a.META,action:"Add custom Safe App"},TRANSACTION_CONFIRMED:{event:a.a.META,action:"Transaction Confirmed"},TRANSACTION_REJECTED:{event:a.a.META,action:"Transaction Rejected"},LEGACY_API_CALL:{event:a.a.META,action:"Legacy API call"},SHARED_APP_LANDING:{event:a.a.META,action:"Shared App landing page visited"},SHARED_APP_CHAIN_ID:{event:a.a.META,action:"Shared App chainId"},SHARED_APP_OPEN_DEMO:{event:a.a.META,action:"Open demo safe from shared app"},SHARED_APP_OPEN_AFTER_SAFE_CREATION:{event:a.a.META,action:"Open shared app after Safe creation"}},s=Object(r.a)(c,"safe-apps")},2066:function(e,t,n){"use strict";var a=n(3),r=n(37),c=n(674),s=n(681),i=n(693),o=n(691),d=n(1),l=["name","onChange","value"],u=["classes","disableError","formControlProps","input","label","meta","renderValue"],j={minWidth:"100%"};t.a=function(e){var t=e.classes,n=e.disableError,b=e.formControlProps,f=e.input,O=f.name,h=f.onChange,p=f.value,x=Object(r.a)(f,l),m=e.label,g=e.meta,v=e.renderValue,w=Object(r.a)(e,u),y=(g.submitError&&!g.dirtySinceLastSubmit||g.error)&&g.touched&&!n,S=Object(a.a)(Object(a.a)({},x),{},{name:O});return Object(d.jsxs)(c.a,Object(a.a)(Object(a.a)({},b),{},{error:y,style:j,children:[Object(d.jsx)(i.a,{htmlFor:O,children:m}),Object(d.jsx)(o.a,Object(a.a)({classes:t,inputProps:S,onChange:h,renderValue:v,value:p,variant:"outlined"},w)),y&&Object(d.jsx)(s.a,{children:g.error||g.submitError})]}))}},2088:function(e,t,n){"use strict";var a,r=n(7),c=n(6),s=n(1),i=c.default.button(a||(a=Object(r.a)(["\n  background: none;\n  color: inherit;\n  border: none;\n  padding: 0;\n  font: inherit;\n  cursor: pointer;\n  border-radius: 50%;\n  transition: background-color 0.2s ease-in-out;\n  outline-color: transparent;\n  height: 24px;\n  width: 24px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  :hover {\n    background-color: ",";\n  }\n"])),(function(e){return e.theme.colors.separator}));t.a=function(e){var t=e.onClick,n=void 0===t?function(){}:t,a=e.children,r=e.dataTestId;return Object(s.jsx)(i,{onClick:n,type:"button","data-testid":r,children:a})}},2227:function(e,t,n){"use strict";t.a=n.p+"static/media/safe-created.ad262168.svg"},2228:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n(0),r=n(59),c=function(){var e=Object(r.i)().search;return Object(a.useMemo)((function(){return new URLSearchParams(e)}),[e])}},3086:function(e,t,n){"use strict";n.r(t);var a,r,c,s=n(10),i=n(7),o=n(3),d=n(2),l=n.n(d),u=n(8),j=n(15),b=n(0),f=n.n(b),O=n(374),h=n(2229),p=n.n(h),x=n(6),m=n(16),g=n(995),v=n.n(g),w=n(59),y=n(9),S=n(2122),E=n(145),C=n(75),A=n(2078),k=n(25),N=n(5),P=n(2468),T=n(232),F=n(146),_=n(56),I=n(233),R=n(234),M=n(49),L="customSafeName",D="suggestedSafeName",z="owners",G="safeOwnerENSList",H="newSafeThreshold",B="maxOwnerNumber",Y="safeCreationSalt",W="gasLimit",U="gasPrice",q="gasMaxPrioFee",J="safeCreationTxHash",V="NEW_SAFE_PENDING_CREATION_STORAGE_KEY",K=n(2144),$=n(2067),X=n(32),Q=n(31),Z=n(2095),ee=n(1);var te,ne,ae,re,ce,se,ie,oe,de,le=function(){var e=Object(b.useState)({}),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(m.d)(M.d),c=Object(K.b)().setCurrentStep;Object(b.useEffect)((function(){r||c(0)}),[r,c]);var i=Object(T.d)(),d=i.getState().values,f=!!d.customSafeName;return Object(b.useEffect)((function(){return function(){f&&Object(Q.d)(Z.b.NAME_SAFE)}}),[f]),Object(b.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t,n,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.getState().values,n=t.owners,e.next=4,Promise.all(n.filter((function(e){var n=e.addressFieldName;return!!t[n]})).map(function(){var e=Object(u.a)(l.a.mark((function e(n){var a,r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.addressFieldName,r=t[a],e.next=4,Object(X.l)(r);case 4:return c=e.sent,e.abrupt("return",{address:r,name:c});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:r=e.sent,c=r.reduce((function(e,t){var n=t.address,a=t.name;return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},n,a))}),{}),a(c);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[i]),Object(b.useEffect)((function(){n&&i.change(G,n)}),[n,i]),Object(ee.jsxs)(ue,{"data-testid":"create-safe-name-step",children:[Object(ee.jsx)(E.a,{margin:"md",children:Object(ee.jsxs)(_.a,{color:"primary",noMargin:!0,size:"lg",children:["You are about to create a new Astra Safe wallet with one or more owners. First, let's give your new wallet a name. This name is only stored locally and will never be shared with Gnosis or any third parties. The new Safe will ONLY be available on ",Object(ee.jsx)($.a,{})]})}),Object(ee.jsx)("label",{htmlFor:L,children:"Name of the new Safe"}),Object(ee.jsx)(je,{margin:"lg",children:Object(ee.jsx)(F.a,{xs:11,children:Object(ee.jsx)(I.a,{component:R.a,name:L,placeholder:d.suggestedSafeName,label:"Safe name",type:"text",testId:"create-safe-name-field"})})}),Object(ee.jsx)(E.a,{margin:"lg",children:Object(ee.jsxs)(_.a,{color:"primary",noMargin:!0,size:"lg",children:["By continuing you consent to the"," ",Object(ee.jsx)(be,{href:"https://gnosis-safe.io/terms",rel:"noopener noreferrer",target:"_blank",children:"terms of use"})," and ",Object(ee.jsx)(be,{href:"https://gnosis-safe.io/privacy",rel:"noopener noreferrer",target:"_blank",children:"privacy policy"}),"."]})})]})},ue=Object(x.default)(E.a)(a||(a=Object(i.a)(["\n  padding: ",";\n"])),N.lg),je=Object(x.default)(E.a)(r||(r=Object(i.a)(["\n  display: flex;\n  max-width: 480px;\n  margin-top: 12px;\n"]))),be=x.default.a(c||(c=Object(i.a)(["\n  color: ",";\n"])),N.secondary),fe=n(2469),Oe=n(50),he=n(773),pe=n.n(he),xe=n(806),me=n(788),ge=n(2112),ve=n(172),we=n(2088),ye=n(2066),Se=n(155),Ee=n(147),Ce=n(2056),Ae=n(170),ke=n(77);var Ne,Pe,Te,Fe,_e,Ie=function(){var e=Object(m.d)(M.d),t=Object(K.b)().setCurrentStep;Object(b.useEffect)((function(){e||t(0)}),[e,t]);var n=Object(T.d)(),a=Object(m.d)(Ae.f),r=n.getState().values,c=n.getState().errors||{},i=r.owners,d=r.safeOwnerENSList,j=r.newSafeThreshold,f=r.maxOwnerNumber,O=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(X.l)(t);case 2:a=e.sent,n.change(G,Object(o.a)(Object(o.a)({},d),{},Object(s.a)({},t,a)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(l.a.mark((function e(t,a,r){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.startsWith("ethereum:")?t.replace("ethereum:",""):t,e.next=3,O(c);case 3:n.change(r,c),a();case 5:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}();return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)(Re,{"data-testid":"create-safe-owners-confirmation-step",children:[Object(ee.jsx)(Me,{color:"primary",noMargin:!0,size:"lg",children:"Your Safe will have one or more owners. We have prefilled the first owner with your connected wallet details, but you are free to change this to a different owner."}),Object(ee.jsxs)(_.a,{color:"primary",size:"lg",children:["Add additional owners (e.g. wallets of your teammates) and specify how many of them have to confirm a transaction before it gets executed. In general, the more confirmations required, the more secure your Safe is.",Object(ee.jsxs)(Le,{href:"https://help.gnosis-safe.io/en/articles/4772567-what-gnosis-safe- setup-should-i-use",target:"_blank",rel:"noreferrer",title:"Learn about which Safe setup to use",children:[Object(ee.jsx)(y.Text,{size:"xl",as:"span",color:"primary",children:"Learn about which Safe setup to use"}),Object(ee.jsx)(y.Icon,{size:"sm",type:"externalLink",color:"primary"})]}),". The new Safe will ONLY be available on ",Object(ee.jsx)($.a,{})]})]}),Object(ee.jsx)(Se.a,{}),Object(ee.jsxs)(De,{children:[Object(ee.jsx)(F.a,{xs:3,children:"NAME"}),Object(ee.jsx)(F.a,{xs:7,children:"ADDRESS"})]}),Object(ee.jsx)(Se.a,{}),Object(ee.jsxs)(E.a,{margin:"md",padding:"md",children:[Object(ee.jsx)(De,{children:i.map((function(e,t){var s=e.nameFieldName,o=e.addressFieldName,p=c[o],x=r[o],m="owner-address-0"!==o,g=d[x]||"Owner Name";return Object(ee.jsxs)(b.Fragment,{children:[Object(ee.jsx)(F.a,{xs:3,children:Object(ee.jsx)(ze,{component:R.a,name:s,placeholder:g,label:"Owner Name",type:"text",validate:Object(Ee.h)(0,50),testId:s})}),Object(ee.jsx)(F.a,{xs:7,children:Object(ee.jsx)(ge.a,{fieldMutator:function(){var e=Object(u.a)(l.a.mark((function e(t){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.change(o,t),!(c=null===(r=a[t])||void 0===r?void 0:r.name)){e.next=6;break}n.change(s,c),e.next=8;break;case 6:return e.next=8,O(t);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),inputAdornment:!p&&{endAdornment:Object(ee.jsx)(xe.a,{position:"end",children:Object(ee.jsx)(Ge,{"data-testid":"".concat(o,"-valid-adornment")})})},name:o,placeholder:"Owner Address*",text:"Owner Address",testId:o,validators:[function(e){return i.filter((function(e,n){return n!==t})).some((function(t){return Object(ke.a)(r[t.addressFieldName],e)}))?Ee.a:void 0}]})}),Object(ee.jsx)(He,{xs:1,center:"xs",middle:"xs",children:Object(ee.jsx)(Ce.a,{handleScan:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h.apply(void 0,t.concat([o]))},testId:"".concat(o,"-scan-QR")})}),m&&Object(ee.jsx)(He,{xs:1,center:"xs",middle:"xs",children:Object(ee.jsx)(we.a,{onClick:function(){return function(e){var t=e.addressFieldName,a=i.filter((function(e){return e.addressFieldName!==t}));n.change(z,a),n.change(t,void 0);var r=f-1;n.change(B,r),j>a.length&&n.change(H,j-1)}({addressFieldName:o})},dataTestId:"".concat(o,"-remove-button"),children:Object(ee.jsx)(y.Icon,{size:"sm",type:"delete",color:"icon",tooltip:"Delete Owner"})})})]},o)}))}),Object(ee.jsx)(Be,{align:"center",grow:!0,children:Object(ee.jsx)(ve.a,{color:"secondary","data-testid":"add-new-owner",onClick:function(){var e={nameFieldName:"owner-name-".concat(f),addressFieldName:"owner-address-".concat(f)};n.change(z,[].concat(Object(Oe.a)(i),[e]));var t=f+1;n.change(B,t)},children:Object(ee.jsx)(_.a,{noMargin:!0,size:"lg",children:"+ Add another owner"})})}),Object(ee.jsxs)(Re,{children:[Object(ee.jsx)(E.a,{children:Object(ee.jsx)(_.a,{children:"Any transaction requires the confirmation of:"})}),Object(ee.jsxs)(Be,{align:"center",grow:!0,children:[Object(ee.jsx)(F.a,{xs:1,children:Object(ee.jsx)(I.a,{component:ye.a,"data-testid":"threshold-selector-input",name:H,validate:function(e){return Object(Ee.d)(Ee.p,Object(Ee.i)(1),(function(){return j&&j<=i.length?void 0:Ee.b}))(e)},children:i.map((function(e,t){return Object(ee.jsx)(me.a,{value:t+1,"data-testid":"threshold-selector-option-".concat(t+1),children:t+1},"threshold-selector-option-".concat(t))}))})}),Object(ee.jsx)(F.a,{xs:11,children:Object(ee.jsxs)(Ye,{noMargin:!0,children:["out of ",i.length," owner(s)"]})})]})]})]})]})},Re=Object(x.default)(E.a)(te||(te=Object(i.a)(["\n  padding: ",";\n"])),N.lg),Me=Object(x.default)(_.a)(ne||(ne=Object(i.a)(["\n  margin-bottom: 12px;\n"]))),Le=Object(x.default)(y.Link)(ae||(ae=Object(i.a)(["\n  padding: 0 ",";\n  & svg {\n    position: relative;\n    top: 1px;\n    left: ",";\n    height: 14px;\n    width: 14px;\n  }\n"])),N.xs,N.xs),De=Object(x.default)(C.a)(re||(re=Object(i.a)(["\n  padding: "," ",";\n  font-size: ",";\n  color: ",";\n"])),N.sm,N.lg,N.extraSmallFontSize,N.disabled),ze=Object(x.default)(I.a)(ce||(ce=Object(i.a)(["\n  margin-right: ",";\n  margin-bottom: ",";\n"])),N.md,N.md),Ge=Object(x.default)(pe.a)(se||(se=Object(i.a)(["\n  color: #03ae60;\n  height: 20px;\n"]))),He=Object(x.default)(F.a)(ie||(ie=Object(i.a)(["\n  height: 56px;\n  max-width: 32px;\n  cursor: pointer;\n"]))),Be=Object(x.default)(C.a)(oe||(oe=Object(i.a)(["\n  justify-content: center;\n"]))),Ye=Object(x.default)(_.a)(de||(de=Object(i.a)(["\n  padding-left: 12px;\n"]))),We=n(802),Ue=n(20),qe=n(109),Je=n(173),Ve=n(256),Ke=n(65),$e=n(135),Xe=function(){var e=Object(u.a)(l.a.mark((function e(t,n,a,r){var c,s,i,o,d,u,b,f,O,h;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([Object(qe.b)(r,n,t,a),Object(Ke.e)(),Object($e.e)()?Object(Ke.f)():{maxPriorityFeePerGas:0,maxFeePerGas:0}]);case 2:return c=e.sent,s=Object(j.a)(c,3),i=s[0],o=s[1],d=s[2],u=i*parseInt(o,10),b=Object(Ke.h)(d.maxPriorityFeePerGas,parseInt(o,10)),f=Object(Ue.m)(),O=Object(Je.a)(u,f.decimals),h=Object(Ve.a)(O),e.abrupt("return",{gasPrice:o,gasEstimation:i,gasCostFormatted:h,gasLimit:i,gasMaxPrioFee:b,gasMaxPrioFeeFormatted:Object(Ve.a)(b.toString())});case 13:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}(),Qe=n(83);var Ze=function(){var e=Object(m.d)(M.d),t=Object(K.b)().setCurrentStep;Object(b.useEffect)((function(){e||t(0)}),[e,t]);var n=Object(T.d)(),a=n.getState().values,r=a.suggestedSafeName,c=a.customSafeName||r,s=a.newSafeThreshold,i=a.owners,o=a.safeOwnerENSList,d=i.length,l=a.safeCreationSalt,u=function(e){var t=e.addresses,n=e.numOwners,a=e.safeCreationSalt,r=Object(b.useState)({gasEstimation:0,gasCostFormatted:"> 0.001",gasLimit:0,gasPrice:"0",gasMaxPrioFee:0,gasMaxPrioFeeFormatted:"0"}),c=Object(j.a)(r,2),s=c[0],i=c[1],o=Object(m.d)(M.g),d=JSON.stringify(t);return Object(b.useEffect)((function(){var e,t=JSON.parse(d);t.length&&n&&o&&(null===(e=Xe(o,n,a,t))||void 0===e||e.then(i))}),[n,a,d,o]),s}({addresses:i.map((function(e){var t=e.addressFieldName;return a[t]})),numOwners:d,safeCreationSalt:l}),O=u.gasCostFormatted,h=u.gasLimit,p=u.gasPrice,x=u.gasMaxPrioFee,g=Object(Ue.m)();return Object(b.useEffect)((function(){n.change(W,h),n.change(U,p),n.change(q,x)}),[h,p,n,x]),Object(ee.jsxs)(C.a,{"data-testid":"create-safe-review-step",children:[Object(ee.jsx)(F.a,{xs:4,layout:"column",children:Object(ee.jsxs)(et,{children:[Object(ee.jsx)(E.a,{margin:"lg",children:Object(ee.jsx)(_.a,{color:"primary",noMargin:!0,size:"lg",children:"Details"})}),Object(ee.jsxs)(E.a,{margin:"lg",children:[Object(ee.jsx)(_.a,{color:"disabled",noMargin:!0,size:"sm",children:"Name of new Safe"}),Object(ee.jsx)(tt,{color:"primary",noMargin:!0,size:"md",weight:"bolder","data-testid":"create-safe-review-safe-name",children:c})]}),Object(ee.jsxs)(E.a,{margin:"lg",children:[Object(ee.jsx)(_.a,{color:"disabled",noMargin:!0,size:"sm",children:"Any transaction requires the confirmation of:"}),Object(ee.jsx)(_.a,{color:"primary",noMargin:!0,size:"md",weight:"bolder","data-testid":"create-safe-review-threshold-label",children:"".concat(s," out of ").concat(d," owners")})]})]})}),Object(ee.jsx)(F.a,{layout:"column",xs:8,children:Object(ee.jsxs)(We.a,{children:[Object(ee.jsx)(nt,{children:Object(ee.jsx)(_.a,{color:"primary",noMargin:!0,size:"lg",children:"".concat(d," Safe owners")})}),Object(ee.jsx)(Se.a,{}),i.map((function(e){var t=e.nameFieldName,n=e.addressFieldName,r=a[n],c=a[t]||o[r];return Object(ee.jsxs)(f.a.Fragment,{children:[Object(ee.jsx)(at,{children:Object(ee.jsx)(F.a,{align:"center",xs:12,"data-testid":"create-safe-owner-details-".concat(r),children:Object(ee.jsx)(Qe.a,{hash:r,name:c,showAvatar:!0,showCopyBtn:!0,explorerUrl:Object(Ue.i)(r)})})}),Object(ee.jsx)(Se.a,{})]},"owner-".concat(n))}))]})}),Object(ee.jsx)(rt,{align:"center",children:Object(ee.jsxs)(_.a,{color:"primary",noMargin:!0,size:"lg",children:["You're about to create a new Safe on ",Object(ee.jsx)($.a,{})," and will have to confirm a transaction with your currently connected wallet. The creation will cost approximately ",O," ",g.symbol,". The exact amount will be determined by your wallet."]})})]})},et=Object(x.default)(E.a)(Ne||(Ne=Object(i.a)(["\n  padding: ",";\n  border-right: solid 1px ",";\n  height: 100%;\n"])),N.lg,N.border),tt=Object(x.default)(_.a)(Pe||(Pe=Object(i.a)(["\n  text-overflow: ellipsis;\n  overflow: hidden;\n"]))),nt=Object(x.default)(E.a)(Te||(Te=Object(i.a)(["\n  padding: ",";\n"])),N.lg),at=Object(x.default)(C.a)(Fe||(Fe=Object(i.a)(["\n  align-items: center;\n  min-width: fit-content;\n  padding: ",";\n  padding-left: ",";\n"])),N.sm,N.lg),rt=Object(x.default)(C.a)(_e||(_e=Object(i.a)(["\n  background-color: ",";\n  padding: ",";\n  text-align: center;\n"])),N.background,N.lg),ct=n(132),st=n(990),it=n(41),ot=n(26);function dt(e){return lt.apply(this,arguments)}function lt(){return(lt=Object(u.a)(l.a.mark((function e(t){var n,a,r,c,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.sender,a=t.hash,r=t.nonce,c=t.data,s=Object(X.g)(),e.next=4,s.eth.getBlock("latest",!0);case 4:return i=e.sent,o=i.transactions.find((function(e){return Object(it.f)(e.from,n)&&e.nonce===r&&!Object(ke.a)(e.hash,a)&&Object(ke.a)(e.input,c)})),e.abrupt("return",o);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ut,jt,bt,ft,Ot=function e(t,n){var a=t.sender,r=t.hash,c=t.data,s=t.nonce,i=t.gasPrice,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,j=Object(X.g)();return new Promise((function(t,b){var f,O=(n||{}).maxRetries;if(d>(void 0===O?720:O))b(new ot.a(ot.b._805,"max retries reached"));else{var h=function(){var f=Object(u.a)(l.a.mark((function u(){var f,O,h,p,x;return l.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:if(null!=s&&null!=i){l.next=12;break}return f={sender:a,hash:r,data:c},l.prev=2,l.next=5,j.eth.getTransaction(r);case 5:(O=l.sent)&&(f=Object(o.a)(Object(o.a)({},f),{},{nonce:O.nonce,gasPrice:O.gasPrice})),l.next=11;break;case 9:l.prev=9,l.t0=l.catch(2);case 11:return l.abrupt("return",e(f,n,d+1).then(t).catch(b));case 12:return l.prev=12,l.next=15,j.eth.getTransactionReceipt(r);case 15:if(!(h=l.sent)){l.next=18;break}return l.abrupt("return",t(h));case 18:l.next=22;break;case 20:l.prev=20,l.t1=l.catch(12);case 22:return l.prev=22,l.next=25,dt({sender:a,hash:r,nonce:s,data:c});case 25:if(!(p=l.sent)){l.next=33;break}return l.next=29,j.eth.getTransactionReceipt(p.hash);case 29:if(!(x=l.sent)){l.next=32;break}return l.abrupt("return",t(x));case 32:return l.abrupt("return",e({sender:a,nonce:s,hash:p.hash,data:p.input,gasPrice:p.gasPrice},n,d+1).then(t).catch(b));case 33:l.next=37;break;case 35:l.prev=35,l.t2=l.catch(22);case 37:e({sender:a,hash:r,data:c,nonce:s,gasPrice:i},n,d+1).then(t).catch(b);case 38:case"end":return l.stop()}}),u,null,[[2,9],[12,20],[22,35]])})));return function(){return f.apply(this,arguments)}}();setTimeout(h,null!==(f=null===n||void 0===n?void 0:n.delay)&&void 0!==f?f:5e3)}}))},ht=n(104),pt=Object(x.default)(ve.a)(ut||(ut=Object(i.a)(["\n  margin-right: 16px;\n"]))),xt=x.default.div(jt||(jt=Object(i.a)(["\n  width: 100%;\n  height: 76px;\n\n  button {\n    margin-top: 24px;\n  }\n"]))),mt=x.default.span(bt||(bt=Object(i.a)(["\n  margin-left: 10px;\n"]))),gt=function(){return Object(ee.jsx)(_.a,{size:"lg",color:"primary",children:"This process should take a couple of minutes."})},vt=function(e){var t=e.onCancel,n=e.onRetry;return Object(ee.jsxs)(xt,{children:[Object(ee.jsx)(Se.a,{}),Object(ee.jsx)(pt,{onClick:t,variant:"contained",children:"Cancel"}),Object(ee.jsx)(ve.a,{color:"primary",onClick:n,variant:"contained",children:"Retry"})]})},wt=[{id:"1",label:"Waiting for transaction confirmation",description:void 0,instruction:"Please confirm the Safe creation in your wallet",footerComponent:null},{id:"2",label:"Transaction submitted",description:void 0,instruction:"Please do not leave the page",footerComponent:gt},{id:"3",label:"Validating transaction",description:void 0,instruction:"Please do not leave the page",footerComponent:gt},{id:"4",label:"Deploying smart contract",description:void 0,instruction:"Please do not leave the page",footerComponent:gt},{id:"5",label:"Generating your Safe",description:void 0,instruction:"Please do not leave the page",footerComponent:gt},{id:"6",label:"Success",description:"Your Safe was created successfully",instruction:void 0,footerComponent:function(e){var t=e.continueButtonDisabled,n=e.onContinue;return Object(ee.jsxs)(xt,{children:[Object(ee.jsx)(Se.a,{}),Object(ee.jsx)(ht.a,Object(o.a)(Object(o.a)({},Z.b.GET_STARTED),{},{children:Object(ee.jsx)(ve.a,{color:"primary",disabled:t,onClick:n,variant:"contained","data-testid":"continue-btn",children:t?Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(y.Loader,{size:"xs",color:"secondaryLight"})," ",Object(ee.jsx)(mt,{children:"Loading your Safe"})]}):Object(ee.jsx)(ee.Fragment,{children:"Get started"})})}))]})}}],yt=n(117),St=n(2227),Et=n.p+"static/media/vault-error.17985c86.svg",Ct=n.p+"static/media/creation-process.b0164935.gif",At=n(153),kt=n(86),Nt=n(2542),Pt=n.n(Nt),Tt=n(169),Ft=n(69),_t=n(30);Pt.a.addABI(null===(ft=Object(Tt.getProxyFactoryDeployment)({version:_t.q}))||void 0===ft?void 0:ft.abi);var It,Rt,Mt,Lt,Dt,zt,Gt,Ht,Bt,Yt,Wt,Ut,qt,Jt,Vt,Kt,$t=function(e){var t,n=Pt.a.decodeLogs(e).find((function(e){return"ProxyCreation"===e.name})),a=null===n||void 0===n||null===(t=n.events)||void 0===t?void 0:t.find((function(e){return"proxy"===e.name}));return Object(Ft.a)((null===a||void 0===a?void 0:a.value)||"")},Xt=n(355),Qt=function(e){var t,n=e.creationTxHash,a=e.onCancel,r=e.onRetry,c=e.onSuccess,s=e.submittedPromise,i=Object(b.useState)(!0),d=Object(j.a)(i,2),f=d[0],O=d[1],h=Object(b.useState)(0),p=Object(j.a)(h,2),x=p[0],g=p[1],v=Object(b.useState)(""),w=Object(j.a)(v,2),S=w[0],E=w[1],C=Object(b.useState)(""),A=Object(j.a)(C,2),k=A[0],N=A[1],P=Object(b.useState)(!1),T=Object(j.a)(P,2),F=T[0],_=T[1],I=Object(b.useState)(!1),R=Object(j.a)(I,2),L=R[0],D=R[1],z=Object(b.useState)(!1),G=Object(j.a)(z,2),H=G[0],B=G[1],Y=Object(b.useState)(!1),W=Object(j.a)(Y,2),U=W[0],q=W[1],J=Object(m.d)(M.d),V=Object(m.c)(),K=function(e){return 0===e}(x),$=Object(b.useCallback)((function(e){Object(X.j)(e)?V(Object(kt.h)(At.a.TX_PENDING_MSG)):V(Object(kt.h)(Object(o.a)(Object(o.a)({},At.a.CREATE_SAFE_FAILED_MSG),{},{message:"".concat(At.a.CREATE_SAFE_FAILED_MSG.message," \u2013 ").concat(e.message)})))}),[V]),te=Object(b.useCallback)((function(e){D(!1),B(!1),q(!1),_(!0),Object(ot.c)(ot.b._800,e.message),$(e)}),[D,B,q,_,$]),ne=function(){g(0),_(!1),r()};return Object(b.useEffect)((function(){J&&O(!1)}),[J]),Object(b.useEffect)((function(){if(void 0!==s){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(0),e.prev=1,e.next=4,s;case 4:t=e.sent,E(t.transactionHash),g(1),D(!0),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),Object(Xt.a)(e.t0)&&Object(Q.d)(Z.b.REJECT_CREATE_SAFE),te(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();e()}}),[s,te]),Object(b.useEffect)((function(){void 0!==n&&(E(n),g(1),D(!0))}),[n]),Object(b.useEffect)((function(){if(L){var e=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(X.g)(),e.next=3,n.eth.getTransaction(t);case 3:if(null!=(null===(a=e.sent)||void 0===a?void 0:a.blockNumber)){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,n.eth.getTransactionReceipt(t);case 8:if(null===(r=e.sent)||void 0===r?void 0:r.status){e.next=11;break}throw Error("TX status reverted");case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t=setInterval(Object(u.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x<4&&g(x+1),void 0!==s&&s.then((function(){g(4),B(!0),D(!1)})),void 0===n){t.next=13;break}return t.prev=3,t.next=6,e(n);case 6:t.sent&&(g(4),B(!0),D(!1)),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),te(t.t0);case 13:case"end":return t.stop()}}),t,null,[[3,10]])}))),3e3);return function(){clearInterval(t)}}}),[n,s,L,x,F,te]),Object(b.useEffect)((function(){var e,t=function(){var t=Object(u.a)(l.a.mark((function t(n){var a,r,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=Object(X.g)(),t.next=4,a.eth.getTransactionReceipt(n);case 4:r=t.sent,c="",c=(null===r||void 0===r?void 0:r.events)?r.events.ProxyCreation.returnValues.proxy:$t((null===r||void 0===r?void 0:r.logs)||[]),N(c),e=setInterval(Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Ke.c,e.prev=1,e.next=4,a.eth.getCode(c);case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:t!==Ke.c&&(g(5),_(!1));case 11:case"end":return e.stop()}}),e,null,[[1,7]])}))),1e3),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),te(t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e){return t.apply(this,arguments)}}();if(H)return"string"===typeof S&&t(S),function(){clearInterval(e)}}),[S,H,te]),f||void 0===x?Object(ee.jsx)(Zt,{"data-testid":"create-safe-loader",children:Object(ee.jsx)(y.Loader,{size:"md"})}):(F?t=vt:wt[x].footerComponent&&(t=wt[x].footerComponent),Object(ee.jsxs)(en,{children:[Object(ee.jsx)(tn,{tag:"h2",testId:"safe-creation-process-title",children:"Safe creation process"}),Object(ee.jsx)(nn,{children:Object(ee.jsx)(y.Stepper,{activeStepIndex:x,error:F,orientation:"vertical",steps:wt})}),Object(ee.jsxs)(an,{children:[Object(ee.jsx)(on,{children:Object(ee.jsx)(yt.a,{alt:"Vault",height:92,src:F?Et:x<=4?Ct:St.a})}),Object(ee.jsx)(dn,{children:Object(ee.jsx)(rn,{children:wt[x].description||wt[x].label})}),wt[x].instruction&&Object(ee.jsx)(ln,{children:Object(ee.jsx)(cn,{color:"primary",inversecolors:K.toString(),noMargin:!0,size:"md",$stepIndex:x,children:F?"You can Cancel or Retry the Safe creation process.":wt[x].instruction})}),wt[x].instruction&&n?Object(ee.jsxs)(un,{children:["Your Safe creation transaction:",Object(ee.jsx)("br",{}),Object(ee.jsx)(sn,{children:Object(ee.jsx)(Qe.a,{hash:n,showCopyBtn:!0,explorerUrl:Object(Ue.i)(n)})})]}):null,Object(ee.jsx)(jn,{children:t?Object(ee.jsx)(t,{continueButtonDisabled:U,onCancel:a,onClick:ne,onContinue:function(){q(!0),c(k)},onRetry:ne,safeCreationTxHash:S}):null})]})]}))},Zt=x.default.div(It||(It=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n"]))),en=x.default.div(Rt||(Rt=Object(i.a)(["\n  display: grid;\n  grid-template-columns: 250px auto;\n  grid-template-rows: 43px auto;\n  margin-bottom: 30px;\n"]))),tn=Object(x.default)(A.a)(Mt||(Mt=Object(i.a)(["\n  grid-column: 1/3;\n  grid-row: 1;\n  margin: 7px 0 0 0 !important;\n"]))),nn=x.default.div(Lt||(Lt=Object(i.a)(["\n  grid-column: 1;\n  grid-row: 2;\n"]))),an=x.default.div(Dt||(Dt=Object(i.a)(["\n  grid-column: 2;\n  grid-row: 2;\n  text-align: center;\n  background-color: ",";\n  border-radius: 5px;\n  min-width: 700px;\n  padding-top: 70px;\n  box-shadow: 0 0 10px 0 rgba(33, 48, 77, 0.1);\n\n  display: grid;\n  grid-template-rows: 100px 50px 110px 1fr;\n"])),(function(e){return e.theme.colors.white})),rn=x.default.div(zt||(zt=Object(i.a)(["\n  font-size: 20px;\n  padding-top: 10px;\n"]))),cn=Object(x.default)(_.a)(Gt||(Gt=Object(i.a)(["\n  background-color: ",";\n  color: ",";\n  padding: 28px;\n  font-size: 20px;\n  margin-bottom: 16px;\n  transition: color 0.3s ease-in-out, background-color 0.3s ease-in-out;\n"])),(function(e){return 0===e.$stepIndex?N.connected:N.background}),(function(e){var t=e.theme;return 0===e.$stepIndex?t.colors.white:N.fontColor})),sn=x.default.div(Ht||(Ht=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  position: relative;\n  z-index: 2;\n  margin-bottom: -10px;\n"]))),on=x.default.div(Bt||(Bt=Object(i.a)(["\n  grid-row: 1;\n"]))),dn=x.default.div(Yt||(Yt=Object(i.a)(["\n  grid-row: 2;\n"]))),ln=x.default.div(Wt||(Wt=Object(i.a)(["\n  grid-row: 3;\n  margin: 27px 0;\n"]))),un=x.default.div(Ut||(Ut=Object(i.a)(["\n  grid-row: 4;\n  margin: 3em 0;\n  font-size: 0.8em;\n"]))),jn=x.default.div(qt||(qt=Object(i.a)(["\n  grid-row: 5;\n\n  padding: 10px 0;\n  display: flex;\n  justify-content: center;\n  align-items: flex-end;\n"]))),bn=n(504),fn=n(730),On=n(2154),hn=n(220),pn=n(216),xn=n(70),mn=n(514),gn=n(2228),vn=n(2060),wn=Object(x.default)(Qe.a)(Jt||(Jt=Object(i.a)(["\n  display: inline-flex;\n"]))),yn=x.default.div(Vt||(Vt=Object(i.a)(["\n  text-align: center;\n"]))),Sn=x.default.span(Kt||(Kt=Object(i.a)(["\n  font-weight: ",";\n"])),N.boldFont),En=function(){k.u.push(k.l)},Cn=function(e){return new Promise((function(t){return setTimeout(t,e)}))},An=function(e){var t="[ethjs-query] while formatting outputs from RPC ";if(!e.message.startsWith(t))return e;var n=e.message.split(t).pop()||"",a="";try{a=JSON.parse(n.slice(1,-1)).value.message}catch(r){a=""}return a?new Error(a):e},kn=function(){return Object(ct.b)(V)||En()},Nn=function(e,t){if(!e)return Promise.reject(new Error("No user address"));var n=kn();return n?new Promise((function(a,r){var c=n.newSafeThreshold,i=n.owners.map((function(e){var t=e.addressFieldName;return n[t]})),d=n.gasLimit,l=n.gasPrice,u=n.gasMaxPrioFee,j=Date.now(),b=Object(qe.h)(i,c,j),f=Object($e.b)(e,{ethGasLimit:d.toString(),ethGasPriceInGWei:l,ethMaxPrioFeeInGWei:u.toString()});b.send(f).once("transactionHash",(function(c){var i;Object(Q.d)(Z.b.SUBMIT_CREATE_SAFE),t(c),Object(ct.f)(V,Object(o.a)(Object(o.a)({},n),{},(i={},Object(s.a)(i,Y,j),Object(s.a)(i,J,c),i))),Ot({sender:e,hash:c,data:b.encodeABI()}).then((function(e){Object(mn.a)(e)?r(new Error("Sped-up tx reverted")):(console.log("Sped-up tx mined:",e),Object(Q.d)(Z.b.CREATED_SAFE),a(e))})).catch((function(e){r(An(e))}))})).then((function(e){console.log("Original tx mined:",e),Object(Q.d)(Z.b.CREATED_SAFE),a(e)})).catch((function(e){r(An(e))}))})):Promise.reject(new Error("No saved Safe creation"))},Pn=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(st.backOff)((function(){return Object(fn.a)(t)}),{startingDelay:750,maxDelay:2e4,numOfAttempts:19,retry:function(e){return console.info("waiting for client-gateway to provide safe information",e),!0}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var Tn,Fn,_n,In,Rn,Mn=function(){var e=Object(b.useState)(),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(b.useState)(),c=Object(j.a)(r,2),s=c[0],i=c[1],d=Object(m.c)(),f=Object(m.d)(M.g),O=Object(m.d)(xn.a),h=Object(gn.a)().get("redirect"),p=Object(b.useState)(!1),x=Object(j.a)(p,2),g=x[0],v=x[1],w=Object(b.useState)({safeAddress:""}),S=Object(j.a)(w,2),E=S[0],C=S[1],A=Object(b.useState)(!1),N=Object(j.a)(A,2),P=N[0],T=N[1],F=Object(b.useState)(""),I=Object(j.a)(F,2),R=I[0],L=I[1];Object(b.useEffect)((function(){var e=kn();if(e){var t=e.safeCreationTxHash;t?a(t):i(Nn(f,a))}}),[f]);var D=function(){var e=Object(u.a)(l.a.mark((function e(t){var n,a,r,c,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=kn(),a=n.suggestedSafeName,r=n.customSafeName||a,c=n.owners,s=c.map((function(e){var t=e.nameFieldName,a=e.addressFieldName,r=n[a];return Object(pn.b)({address:n[a],name:n[t]||n.safeOwnerENSList[r],chainId:O})})),i=Object(pn.b)({address:t,name:r,chainId:O}),d(Object(hn.f)([].concat(Object(Oe.a)(s),[i]))),e.next=9,Cn(5e3);case 9:return e.prev=9,e.next=12,Pn(t);case 12:e.next=19;break;case 14:return e.prev=14,e.t0=e.catch(9),L(t),T(!0),e.abrupt("return");case 19:return e.next=21,Object(On.a)(t);case 21:o=e.sent,d(Object(bn.b)(o)),v(!0),C({safeAddress:o.address,safeName:r,safeCreationTxHash:n.safeCreationTxHash});case 25:case"end":return e.stop()}}),e,null,[[9,14]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){Object(Q.d)(Z.b.CANCEL_CREATE_SAFE),Object(ct.d)(V),En()},G=function(){Object(ct.d)(V);var e=E.safeName,t=E.safeCreationTxHash,n=E.safeAddress;if(h)return h.includes(k.a)?k.u.push({pathname:Object(k.p)(h,{shortName:Object(Ue.q)(),safeAddress:n})}):k.u.push({pathname:h}),void(h.includes("appUrl")&&Object(Q.d)(Object(o.a)({},vn.a.SHARED_APP_OPEN_AFTER_SAFE_CREATION)));k.u.push({pathname:Object(k.p)(k.i.DASHBOARD,{shortName:Object(Ue.q)(),safeAddress:n}),state:{name:e,tx:t}})};return Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)(Qt,{creationTxHash:n,onCancel:z,onRetry:function(){Object(Q.d)(Z.b.RETRY_CREATE_SAFE);var e=kn();e&&(a(void 0),Object(ct.f)(V,Object(o.a)(Object(o.a)({},e),{},{safeCreationTxHash:void 0})),i(Nn(f,a)))},onSuccess:D,submittedPromise:s}),g&&Object(ee.jsx)(y.GenericModal,{onClose:G,title:"Safe Created!",body:Object(ee.jsxs)("div",{"data-testid":"safe-created-popup",children:[Object(ee.jsxs)(_.a,{children:["You just created a new Safe on ",Object(ee.jsx)($.a,{})]}),Object(ee.jsxs)(_.a,{children:["You will only be able to use this Safe on ",Object(ee.jsx)($.a,{})]}),Object(ee.jsxs)(_.a,{children:["If you send assets on other networks to this address,"," ",Object(ee.jsx)(Sn,{children:"you will not be able to access them"})]})]}),footer:Object(ee.jsx)(yn,{children:Object(ee.jsx)(ht.a,Object(o.a)(Object(o.a)({},Z.b.GO_TO_SAFE),{},{children:Object(ee.jsx)(ve.a,{testId:"safe-created-button",onClick:G,color:"primary",type:"button",size:"small",variant:"contained",children:"Continue"})}))})}),P&&R&&Object(ee.jsx)(y.GenericModal,{onClose:z,title:"Unable to load the new Safe",body:Object(ee.jsx)("div",{children:Object(ee.jsxs)(_.a,{children:["We are currently unable to load the Safe but it was successfully created and can be found ",Object(ee.jsx)("br",{}),"under the following address"," ",Object(ee.jsx)(wn,{hash:R,showCopyBtn:!0,explorerUrl:Object(Ue.i)(R)})]})}),footer:Object(ee.jsx)(yn,{children:Object(ee.jsx)(ve.a,{onClick:z,color:"primary",type:"button",size:"small",variant:"contained",children:"OK"})})})]})},Ln=n(2545),Dn=n(2546),zn=n(252),Gn=n.n(zn),Hn=n(2547),Bn=n(1942),Yn=n(250),Wn=n(221),Un=n(918),qn=n(102),Jn=n(1030);var Vn,Kn,$n=Object(x.default)(E.a)(Tn||(Tn=Object(i.a)(["\n  padding: ",";\n"])),N.lg),Xn=x.default.div(Fn||(Fn=Object(i.a)(["\n  padding: 30px 0;\n  padding-left: 45px;\n\n  > button {\n    margin: auto;\n  }\n"]))),Qn=Object(x.default)(Dn.a)(_n||(_n=Object(i.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 16px 24px;\n"]))),Zn=Object(x.default)(Hn.a)(In||(In=Object(i.a)(["\n  min-width: 500px;\n"]))),ea=x.default.div(Rn||(Rn=Object(i.a)(["\n  display: flex;\n  margin: "," auto;\n  cursor: pointer;\n  max-width: 50%;\n\n  & > span {\n    font-size: 13px;\n  }\n"])),N.lg),ta=function(){var e=Object(b.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],r=!!Object(m.d)(M.a),c=Object(m.d)(M.f),s=Object(b.useCallback)((function(e){Object(Wn.a)(e),a(!1)}),[]);return Object(ee.jsxs)($n,{"data-testid":"select-network-step",children:[r?Object(ee.jsxs)(ee.Fragment,{children:[!c&&Object(ee.jsx)(_.a,{color:"primary",noMargin:!0,size:"lg",children:"Wallet connected."}),Object(ee.jsxs)(_.a,{color:"primary",size:"lg",noMargin:c,children:["Creating a Safe on\xa0",Object(ee.jsx)($.a,{onClick:function(){a(!0)},"data-testid":"switch-network-link"})]})]}):Object(ee.jsx)(_.a,{color:"primary",noMargin:!0,size:"lg",children:"In order to create your Safe, you need to connect a wallet"}),!r&&Object(ee.jsx)(Xn,{children:Object(ee.jsx)(Jn.a,{})}),r&&c&&Object(ee.jsxs)(_.a,{color:"primary",size:"lg",children:["Your wallet connection must match the selected network. ",Object(ee.jsx)(Un.a,{})]}),Object(ee.jsxs)(Ln.a,{onClose:function(){return a(!1)},"aria-labelledby":"select-network","data-testid":"select-network-popup",open:n,children:[Object(ee.jsxs)(Qn,{disableTypography:!0,children:[Object(ee.jsx)(Yn.a,{variant:"h5",children:"Select Network"}),Object(ee.jsx)(O.a,{"aria-label":"close",onClick:function(){return a(!1)},children:Object(ee.jsx)(Gn.a,{})})]}),Object(ee.jsx)(Zn,{dividers:!0,children:Object(ee.jsx)(Bn.a,{component:"div",children:Object(qn.b)().map((function(e){return Object(ee.jsx)(ea,{role:"button",onClick:function(){return s(e.chainId)},children:Object(ee.jsx)($.a,{networkInfo:e,flexGrow:!0})},e.chainId)}))})})]})]})};t.default=function(){var e=Object(b.useState)(),t=Object(j.a)(e,2),n=t[0],a=t[1],r=Object(b.useState)(!0),c=Object(j.a)(r,2),s=c[0],i=c[1],d=Object(m.d)(M.d),f=Object(m.d)(M.f),O=!!d&&!f;Object(b.useEffect)((function(){var e=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,Promise.resolve(Object(ct.b)(V));case 3:t=e.sent,O&&a(t),i(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[O]);var h=Object(m.d)(M.g),x=Object(m.d)(Ae.f),g=Object(w.i)(),v=Object(fe.a)(),N=Object(b.useState)(),T=Object(j.a)(N,2),F=T[0],_=T[1];if(Object(b.useEffect)((function(){var e=!0;if(O&&h){var t=function(){var t=Object(u.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,na(h,x,g,v);case 2:n=t.sent,e&&_(n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}return function(){e=!1}}),[O,h,x,g,v]),s)return Object(ee.jsx)(ra,{"data-testid":"create-safe-loader",children:Object(ee.jsx)(y.Loader,{size:"md"})});var I=!O||!F;return n?Object(ee.jsx)(Mn,{}):Object(ee.jsx)(S.a,{children:Object(ee.jsxs)(E.a,{children:[Object(ee.jsxs)(C.a,{align:"center",children:[Object(ee.jsx)(ca,{disableRipple:!0,onClick:k.u.goBack,children:Object(ee.jsx)(p.a,{})}),Object(ee.jsx)(A.a,{tag:"h2",children:"Create new Safe"})]}),Object(ee.jsxs)(P.b,{initialValues:F,onSubmit:function(e){Object(Q.d)(Object(o.a)(Object(o.a)({},Z.b.OWNERS),{},{label:e.owners.length})),Object(Q.d)(Object(o.a)(Object(o.a)({},Z.b.THRESHOLD),{},{label:e.newSafeThreshold})),Object(ct.f)(V,Object(o.a)({},e)),a(e)},testId:"create-safe-form",trackingCategory:Z.a,children:[Object(ee.jsx)(P.a,{label:"Connect wallet & select network",nextButtonLabel:"Continue",disableNextButton:I,children:Object(ee.jsx)(ta,{})}),Object(ee.jsx)(P.a,{label:"Name",nextButtonLabel:"Continue",children:Object(ee.jsx)(le,{})}),Object(ee.jsx)(P.a,{label:"Owners and Confirmations",nextButtonLabel:"Continue",children:Object(ee.jsx)(Ie,{})}),Object(ee.jsx)(P.a,{label:"Review",nextButtonLabel:"Create",children:Object(ee.jsx)(Ze,{})})]})]})})};function na(e,t,n,a){return aa.apply(this,arguments)}function aa(){return aa=Object(u.a)(l.a.mark((function e(t,n,a,r){var c,i,d,j,b,f,O,h,p,x,m,g,w,y,S,E;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j=v.a.parse(a.search,{arrayFormat:"comma"}),b=j.name,f=j.owneraddresses,O=j.ownernames,h=j.threshold,p=!!f,x=Array.isArray(f)?f:[f],m=p?x:[t],g=Array.isArray(O)?O:[O],w=[(null===(c=n[t])||void 0===c?void 0:c.name)||""],y=p?g:w,S=Number(h),E=h&&!Number.isNaN(h)&&S<=m.length&&S>0,e.t0=o.a,e.t1=o.a,e.t2=o.a,i={},Object(s.a)(i,D,r),Object(s.a)(i,L,b),Object(s.a)(i,H,E?h:1),Object(s.a)(i,z,m.map((function(e,t){return{nameFieldName:"owner-name-".concat(t),addressFieldName:"owner-address-".concat(t)}}))),e.t3=s.a,e.t4=i,e.t5=G,e.next=23,Promise.all(m.map(function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=s.a,e.t1={},e.t2=t,e.next=5,Object(X.l)(t);case 5:return e.t3=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 23:return e.t6=e.sent.reduce((function(e,t){return Object(o.a)(Object(o.a)({},e),t)}),{}),(0,e.t3)(e.t4,e.t5,e.t6),e.t7=i,e.t8=m.reduce((function(e,t,n){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},"owner-address-".concat(n),t))}),{}),e.t9=(0,e.t2)(e.t7,e.t8),e.t10=y.reduce((function(e,t,n){return Object(o.a)(Object(o.a)({},e),{},Object(s.a)({},"owner-name-".concat(n),t))}),{}),e.t11=(0,e.t1)(e.t9,e.t10),e.t12={},e.t13=(d={},Object(s.a)(d,B,m.length),Object(s.a)(d,Y,Date.now()),d),e.abrupt("return",(0,e.t0)(e.t11,e.t12,e.t13));case 33:case"end":return e.stop()}}),e)}))),aa.apply(this,arguments)}var ra=x.default.div(Vn||(Vn=Object(i.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 100%;\n"]))),ca=Object(x.default)(O.a)(Kn||(Kn=Object(i.a)(["\n  color: ",";\n  padding: ",";\n  margin-right: 5px;\n"])),N.secondary,N.sm)}}]);
//# sourceMappingURL=48.caa7f665.chunk.js.map